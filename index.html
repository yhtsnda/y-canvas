<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title></title>
    <script src="Global.js"></script>
    <script src="Debugger.js"></script>
    <script src="Array_Util.js"></script>
    <script src="Device.js"></script>
    <script src="BaseObject.js"></script>
    <script src="Functions.js"></script>
    <script src="Node.js"></script>
    <script src="Application.js"></script>
    <script src="Scene.js"></script>
    <script src="Layer.js"></script>
    <script src="Sprite.js"></script>
    <script src="ActionManager.js"></script>
    <script src="Action.js"></script>
    <script src="EventSystem.js"></script>
    <script src="MessageCenter.js"></script>
    <script src="Point.js"></script>
    <script src="Size.js"></script>
    <script src="Rect.js"></script>
    <script src="base64-binary.js"></script>
    <script src="AudioEngine.js"></script>
    <script src="ImageEngine.js"></script>
</head>
<body>
    <canvas id="app" width='1024' height='768'></canvas>
    <script type="text/javascript">
        domReady(function(){
            var app = new Application(document.getElementById('app')),
                scene = new Scene,
                layer = new Layer,
                sprite = new Sprite,
                img = new Image;
            img.src = "image/sprite.jpg"; 
            //img.onload = function () {
                sprite.images().push(img);
                sprite.width(695);
                sprite.height(359);
                var move = new MoveTo({x:300,y:400});/*,1000,function(){
                    console.log(1);
                },function(){
                    console.log(2);
                });*/
                /*move.duration = 1000;
                move.callback().push(function(){
                    
                    var rotate = new RotateTo(10,1000);
                    rotate.callback().push(function(){
                        var moveTo = new MoveTo({x:400,y:200},1000);
                        sprite.runAction(moveTo);
                    });
                    sprite.runAction(rotate);
                    var scale = new ScaleTo({x:0.5,y:0.5},1000);
                    sprite.runAction(scale);
                });
                sprite.runAction(move);*/
            //};
            var delay = new Delay();
            delay.duration = 2000;
            delay.callback().push(function(){console.log(1);});
            var rotate = new RotateTo(10,1000);
            rotate.callback().push(function(){
                console.log(2);
            });
            var moveTo = new MoveTo({x:400,y:200},1000,function(){
                console.log(3);
            });
            var seq = new Sequence(delay,rotate,moveTo);
            seq.callback().push(function(){console.log(0)});
            var by = new MoveTo({x:100,y:100},1000,function(){
                console.log(new Date);
            });
            var repeat = new Repeat(by, 5);
            repeat.callback().push(function(){
                console.log('repeat');
            });
            var scale = new ScaleTo({x:0.5,y:2},1000),
                rotate = new RotateTo(Math.PI,2000),
                move = new MoveTo({x:400,y:400},3000);
            
            //sprite.runAction(new Spawn(scale,rotate,move));
            sprite.runAction(repeat);
            sprite.onmousemove.push(function(){
                console.log(this.position());
            });
            app.currentScene = scene;
            scene.addChild(layer);
            layer.addChild(sprite);
            app.run();
        });
    </script>
</body>
</html>